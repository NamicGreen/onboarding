{"version":3,"file":"index.js","sources":["../src/index.tsx"],"sourcesContent":["import React, { useCallback, useEffect, useMemo, useRef, useState } from 'react'\nimport Tippy from '@tippyjs/react'\nimport 'tippy.js/dist/tippy.css'\nimport 'tippy.js/animations/shift-toward-subtle.css'\n\nconst TipContent: React.FC<any> = ({\n\tstart,\n\tstep,\n\tlastStep,\n\tcurretStepConfig,\n\tpreviousStep,\n\tnextStep,\n\tonClose\n}) => {\n\treturn (\n\t\t<div>\n\t\t\t<div className='tipWrapper'>{curretStepConfig?.content}</div>\n\t\t\t<div className='tipDotsWrapper'>\n\t\t\t\t<div className='tipDots'>\n\t\t\t\t\t{Array(lastStep)\n\t\t\t\t\t\t.fill(0)\n\t\t\t\t\t\t.map((_, key) => (\n\t\t\t\t\t\t\t<span className={step === key + 1 ? 'active' : 'dot'} key={key} />\n\t\t\t\t\t\t))}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t{start && (\n\t\t\t\t<div className='tipFooter'>\n\t\t\t\t\t<button disabled={step === 1} onClick={previousStep}>\n\t\t\t\t\t\tBack\n\t\t\t\t\t</button>\n\t\t\t\t\t{step !== lastStep && <button onClick={onClose}>Skip</button>}\n\t\t\t\t\t<button onClick={step !== lastStep ? nextStep : onClose}>\n\t\t\t\t\t\t{step !== lastStep ? 'Next' : 'Close'}\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</div>\n\t)\n}\n\nconst OnBoarding: React.FC<any> = ({ id, config, start = false, onClose }) => {\n\tconst [visible, setVisible] = useState(false)\n\tconst [step, setStep] = useState(0)\n\tconst lastConfig = useRef({})\n\tconst lastStep = Object.keys(config.steps).length\n\n\tconst rectRef: any = useRef(null)\n\n\tconst nextStep = useCallback(() => {\n\t\tsetStep((step) => {\n\t\t\tconst newStep = step + 1\n\t\t\tif (newStep > lastStep) return step\n\t\t\treturn newStep\n\t\t})\n\t}, [lastStep])\n\n\tconst previousStep = useCallback(() => {\n\t\tsetStep((step) => {\n\t\t\tconst newStep = step - 1\n\t\t\tif (newStep < 1) return step\n\t\t\treturn newStep\n\t\t})\n\t}, [])\n\n\tconst onRectClick = useCallback((e: any) => {\n\t\te.preventDefault()\n\t\tnextStep()\n\t}, [])\n\n\tuseEffect(() => {\n\t\tif (start) {\n\t\t\tsetStep(1)\n\t\t} else {\n\t\t\tsetStep(0)\n\t\t}\n\t}, [start])\n\n\tuseEffect(() => {\n\t\tsetTimeout(() => {\n\t\t\tif (step > 0) {\n\t\t\t\tsetVisible(true)\n\t\t\t\trectRef.current.style.visibility = 'initial'\n\t\t\t} else {\n\t\t\t\tsetVisible(false)\n\t\t\t\trectRef.current.style.visibility = 'hidden'\n\t\t\t}\n\t\t}, 1)\n\t}, [step])\n\n\tconst curretStepConfig = useMemo(() => {\n\t\tconst conf = config.steps[step] || {}\n\t\tif (Object.keys(conf).length === 0 && start === false) {\n\t\t\treturn lastConfig.current\n\t\t}\n\t\tconst element: any = document.getElementById(conf.id)\n\n\t\tif (element) {\n\t\t\telement.scrollIntoView({\n\t\t\t\tbehavior: 'smooth',\n\t\t\t\tblock: 'end',\n\t\t\t\tinline: 'start'\n\t\t\t})\n\t\t\trectRef.current.style.visibility = 'initial'\n\t\t\trectRef.current.style.height = element.clientHeight + 'px'\n\t\t\trectRef.current.style.width = element.clientWidth + 'px'\n\n\t\t\tif(element.getBoundingClientRect().top === element.offsetParent.getBoundingClientRect().top) {\n\t\t\t\trectRef.current.style.top =\n\t\t\t\telement.getBoundingClientRect().top + 'px'\n\t\t\t}\n\t\t\telse {\n\t\t\t\trectRef.current.style.top =\n\t\t\t\telement.getBoundingClientRect().top -\n\t\t\t\telement.offsetParent.getBoundingClientRect().top +\n\t\t\t\t'px'\n\t\t\t}\n\t\t\trectRef.current.style.left = element.getBoundingClientRect().left + 'px'\n\t\t}\n\n\t\tconf.element = element\n\t\tlastConfig.current = conf\n\t\treturn conf\n\t}, [step, lastStep, start])\n\n\tconst TipContentElement = config.tipContent ? config.tipContent : TipContent\n\n\treturn (\n\t\t<React.Fragment>\n\t\t\t<Tippy\n\t\t\t\tplacement=\"auto\"\n\t\t\t\treference={curretStepConfig?.element || null}\n\t\t\t\tallowHTML\n\t\t\t\tcontent={React.cloneElement(<TipContentElement />, {\n\t\t\t\t\tstart,\n\t\t\t\t\tstep,\n\t\t\t\t\tlastStep,\n\t\t\t\t\tcurretStepConfig,\n\t\t\t\t\tpreviousStep,\n\t\t\t\t\tnextStep,\n\t\t\t\t\tonClose\n\t\t\t\t} as any)}\n\t\t\t\tanimation='shift-toward-subtle'\n\t\t\t\tvisible={visible}\n\t\t\t/>\n\t\t\t<div\n\t\t\t\tid={id}\n\t\t\t\tref={rectRef}\n\t\t\t\tstyle={{ visibility: 'hidden' }}\n\t\t\t\tclassName={`hightlightRect ${\n\t\t\t\t\tconfig.showBackdrop ? 'withDropshadow' : ''\n\t\t\t\t}`}\n\t\t\t\tonClick={onRectClick}\n\t\t\t/>\n\t\t</React.Fragment>\n\t)\n}\n\nexport default OnBoarding\n"],"names":["TipContent","start","step","lastStep","curretStepConfig","previousStep","nextStep","onClose","React","className","content","Array","fill","map","_","key","disabled","onClick","OnBoarding","id","config","useState","visible","setVisible","setStep","lastConfig","useRef","Object","keys","steps","length","rectRef","useCallback","newStep","onRectClick","e","preventDefault","useEffect","setTimeout","current","style","visibility","useMemo","conf","element","document","getElementById","scrollIntoView","behavior","block","inline","height","clientHeight","width","clientWidth","getBoundingClientRect","top","offsetParent","left","TipContentElement","tipContent","Fragment","Tippy","placement","reference","allowHTML","cloneElement","animation","ref","showBackdrop"],"mappings":"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"}